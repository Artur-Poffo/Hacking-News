---
import BlogPost from "../../../components/BlogPost.astro";
import PostNotFound from "../../../components/PostNotFound.astro";
import DefaultLayout from "../../../layouts/DefaultLayout.astro";

const Posts = await Astro.glob("../../../content/blog/*.md");
const filtredPosts = Posts.filter(
	(post) => post.frontmatter.category === Astro.params.category
);
---

<!DOCTYPE html>
<DefaultLayout>
	{
		filtredPosts.length > 0 ? (
			<div class="flex items-start justify-center flex-wrap gap-8">
				{filtredPosts.map((post) => {
					return (
						<BlogPost
							title={post.frontmatter.title}
							category={post.frontmatter.category}
							description={post.frontmatter.description}
							image={post.frontmatter.heroImage}
						/>
					);
				})}
			</div>
		) : (
			<PostNotFound />
		)
	}
</DefaultLayout>
